<!DOCTYPE html>
<html>

<head>
    <title>Ball Tag</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Exo+2:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- HUD -->
    <div id="hud" class="hidden">
        <div class="hud-item">
            <span class="hud-icon">‚è±Ô∏è</span> <span id="time-remaining">..</span>s
        </div>
        <div class="hud-item">
            <span class="hud-icon">‚ö´</span> <span id="ball-count">1</span>
        </div>
        <div class="hud-item">
            <span class="hud-icon">üìä</span> <span id="difficulty-label">Easy</span>
        </div>
        <div class="hud-item">
            <span class="hud-icon">‚ö°</span> <span id="status-text">Playing</span>
        </div>
    </div>

    <!-- Game Elements Container -->
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
    </div>

    <!-- Start / Pause Menu Modal -->
    <div id="main-menu" class="modal-overlay visible">
        <div class="modal-content">
            <h1 class="game-title">BALL TAG</h1>
            <div class="subtitle">Survive the deep. Dodge the dark.</div>

            <div class="guide-grid">
                <div class="guide-item">
                    <span class="guide-icon">‚å®Ô∏è</span>
                    <span class="guide-text">Arrow Keys or Touch to Move</span>
                </div>
                <div class="guide-item">
                    <span class="guide-icon">‚ê£</span>
                    <span class="guide-text">Space or Button to Clone</span>
                </div>
                <div class="guide-item">
                    <span class="guide-icon">‚ö°</span>
                    <span class="guide-text">Collect Power-ups</span>
                </div>
            </div>

            <h3 style="color: var(--accent-cyan); margin-bottom: 15px;">SELECT DIFFICULTY</h3>
            <div class="difficulty-buttons">
                <button class="btn" onclick="startGame('easy')">Easy</button>
                <button class="btn" onclick="startGame('medium')">Medium</button>
                <button class="btn" onclick="startGame('hard')">Hard</button>
            </div>

            <div id="resume-container" class="hidden"
                style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                <button class="btn btn-primary" onclick="resumeGame()">Resume Game</button>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="modal-overlay">
        <div class="modal-content">
            <h1 class="game-title" style="color: #ff4d4d; text-shadow: 0 0 20px rgba(255, 77, 77, 0.5);">GAME OVER</h1>

            <div id="game-over-stats">
                <div class="stat-row">
                    <span>Rounds Survived:</span>
                    <span id="final-rounds" style="color: var(--accent-cyan)">0</span>
                </div>
                <div class="stat-row">
                    <span>Difficulty:</span>
                    <span id="final-difficulty" style="color: var(--accent-gold)">Easy</span>
                </div>
            </div>

            <div class="difficulty-buttons">
                <button class="btn" onclick="showMainMenu()">Main Menu</button>
                <button class="btn btn-primary" onclick="restartGame()">Try Again</button>
            </div>
        </div>
    </div>

    <div id="countdown-overlay">3</div>

    <!-- Mobile Control Buttons -->
    <div id="mobile-controls" class="mobile-only">
        <!-- Left side clone button -->
        <button id="clone-btn-left" class="mobile-btn clone-btn-left" onclick="spawnExtraPlayer()"
            aria-label="Clone Ball">
            <span class="mobile-btn-icon">+</span>
        </button>

        <!-- Right side clone button -->
        <button id="clone-btn-right" class="mobile-btn clone-btn-right" onclick="spawnExtraPlayer()"
            aria-label="Clone Ball">
            <span class="mobile-btn-icon">+</span>
        </button>

        <!-- Pause button (top-right) -->
        <button id="pause-btn" class="mobile-btn pause-btn"
            onclick="document.dispatchEvent(new KeyboardEvent('keydown', {code: 'Escape'}))" aria-label="Pause">
            <span class="mobile-btn-icon">‚è∏</span>
        </button>
    </div>

    <script src="touch-controls.js"></script>
    <script src="audio.js"></script>
    <script src="script.js"></script>
</body>

</html>